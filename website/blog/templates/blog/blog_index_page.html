{% extends "base.html" %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}


{% block body_class %}template-blogindex{% endblock %}

{% block content %}
{# <h2 class="ui header">{{ self.title }}</h2> #}

<div class="ui blog container">
  {% for post in blog_pages %}
  <div class="post-index">
    <div class="preview image">
      {% image post.listing_image fill-600x400 as image %}
      {% if post.external_link %}
        <a href="{{ post.external_link }}" target="_blank">
      {% else %}
        <a href="{{ post.url }}">
      {% endif %}
        <img src="{{ image.url }}" alt="{{ image.alt }}">
      </a>
    </div>
    <div class="preview content">
      <h2>
        {% if post.external_link %}
          <a href="{{ post.external_link }}" target="_blank">
        {% else %}
          <a href="{{ post.url }}">
        {% endif %}
        {{ post.headline }}
          </a>
      </h2>
      {% if post.subtitle %}
        <h3>{{ post.subtitle }}</h3>
      {% endif %}
      <p>{{ post.first_published_at }}</p>
      <p>{{ post.body | richtext | truncatewords_html:35 }}</p>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
